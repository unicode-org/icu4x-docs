<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="`icu_pattern` is a utility crate of the `ICU4X` project."><meta name="keywords" content="rust, rustlang, rust-lang, icu_pattern"><title>icu_pattern - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../icu_pattern/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../icu_pattern/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate icu_pattern</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.1.2</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></div></section><div id="sidebar-vars" data-name="icu_pattern" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../icu_pattern/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">icu_pattern</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/icu_pattern/lib.rs.html#5-125">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><code>icu_pattern</code> is a utility crate of the <a href="../icu/index.html"><code>ICU4X</code></a> project.</p>
<p>It includes a <a href="struct.Pattern.html" title="Pattern"><code>Pattern</code></a> struct which wraps a paid of <a href="struct.Parser.html" title="Parser"><code>Parser</code></a> and <a href="struct.Interpolator.html" title="Interpolator"><code>Interpolator</code></a> allowing for parsing and interpolation of ICU placeholder patterns, like “{0} days” or
“{0}, {1}” with custom elements and string literals.</p>
<h2 id="placeholders--elements"><a href="#placeholders--elements">Placeholders &amp; Elements</a></h2>
<p>The <a href="struct.Parser.html" title="Parser"><code>Parser</code></a> is generic over any <code>Placeholder</code> which implements <a href="https://doc.rust-lang.org/1.60.0/core/str/traits/trait.FromStr.html"><code>FromStr</code></a>
allowing the consumer to parse placeholder patterns such as “{0}, {1}”,
“{date}, {time}” or any other.</p>
<p>The <a href="struct.Interpolator.html" title="Interpolator"><code>Interpolator</code></a> can interpolate the <a href="struct.Pattern.html" title="Pattern"><code>Pattern</code></a> against any
iterator over <code>Element</code>.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<p>In the following example we’re going to use a custom <code>Token</code> type,
and an <code>Element</code> type which will be either a <code>Token</code> or a string slice.</p>
<p>For the purpose of the example, a higher level
<a href="struct.Pattern.html#method.interpolate_to_string"><code>interpolate_to_string</code></a> method
is being used.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">icu_pattern::Pattern</span>;
<span class="kw">use</span> <span class="ident">std</span>::{<span class="ident">borrow::Cow</span>, <span class="ident">convert::TryInto</span>, <span class="ident">fmt::Display</span>};

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">enum</span> <span class="ident">ExampleToken</span> {
    <span class="ident">Year</span>,
    <span class="ident">Month</span>,
    <span class="ident">Day</span>,
    <span class="ident">Hour</span>,
    <span class="ident">Minute</span>,
}

<span class="kw">impl</span> <span class="ident">Display</span> <span class="kw">for</span> <span class="ident">ExampleToken</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;mut</span> <span class="ident">std::fmt::Formatter</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) -&gt; <span class="ident">std::fmt::Result</span> {
        <span class="macro">write!</span>(<span class="ident">f</span>, <span class="string">&quot;[{:?}]&quot;</span>, <span class="self">self</span>)
    }
}

<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">PartialEq</span>)]</span>
<span class="kw">enum</span> <span class="ident">ExampleElement</span><span class="op">&lt;</span><span class="lifetime">&#39;s</span><span class="op">&gt;</span> {
    <span class="ident">Token</span>(<span class="ident">ExampleToken</span>),
    <span class="ident">Literal</span>(<span class="ident">Cow</span><span class="op">&lt;</span><span class="lifetime">&#39;s</span>, <span class="ident">str</span><span class="op">&gt;</span>),
}

<span class="kw">impl</span> <span class="ident">Display</span> <span class="kw">for</span> <span class="ident">ExampleElement</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span> {
    <span class="kw">fn</span> <span class="ident">fmt</span>(<span class="kw-2">&amp;</span><span class="self">self</span>, <span class="ident">f</span>: <span class="kw-2">&amp;mut</span> <span class="ident">std::fmt::Formatter</span><span class="op">&lt;</span><span class="lifetime">&#39;_</span><span class="op">&gt;</span>) -&gt; <span class="ident">std::fmt::Result</span> {
        <span class="kw">match</span> <span class="self">self</span> {
            <span class="ident"><span class="self">Self</span>::Token</span>(<span class="ident">token</span>) =&gt; <span class="ident">token</span>.<span class="ident">fmt</span>(<span class="ident">f</span>),
            <span class="ident"><span class="self">Self</span>::Literal</span>(<span class="ident">lit</span>) =&gt; <span class="ident">lit</span>.<span class="ident">fmt</span>(<span class="ident">f</span>),
        }
    }
}

<span class="kw">let</span> <span class="ident">pattern</span>: <span class="ident">Pattern</span><span class="op">&lt;</span><span class="ident">usize</span><span class="op">&gt;</span> <span class="op">=</span> <span class="string">&quot;{0}, {1}&quot;</span>.<span class="ident">try_into</span>().<span class="ident">expect</span>(<span class="string">&quot;Failed to parse a pattern.&quot;</span>);

<span class="kw">let</span> <span class="ident">replacements</span> <span class="op">=</span> <span class="macro">vec!</span>[
    <span class="macro">vec!</span>[
        <span class="ident">ExampleElement::Token</span>(<span class="ident">ExampleToken::Year</span>),
        <span class="ident">ExampleElement::Literal</span>(<span class="string">&quot;-&quot;</span>.<span class="ident">into</span>()),
        <span class="ident">ExampleElement::Token</span>(<span class="ident">ExampleToken::Month</span>),
        <span class="ident">ExampleElement::Literal</span>(<span class="string">&quot;-&quot;</span>.<span class="ident">into</span>()),
        <span class="ident">ExampleElement::Token</span>(<span class="ident">ExampleToken::Day</span>),
    ],
    <span class="macro">vec!</span>[
        <span class="ident">ExampleElement::Token</span>(<span class="ident">ExampleToken::Hour</span>),
        <span class="ident">ExampleElement::Literal</span>(<span class="string">&quot;:&quot;</span>.<span class="ident">into</span>()),
        <span class="ident">ExampleElement::Token</span>(<span class="ident">ExampleToken::Minute</span>),
    ],
];

<span class="macro">assert_eq!</span>(
    <span class="ident">pattern</span>
        .<span class="ident">interpolate_to_string</span>::<span class="op">&lt;</span><span class="ident">ExampleElement</span>, <span class="kw">_</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">replacements</span>)
        .<span class="ident">expect</span>(<span class="string">&quot;Failed to interpolate a pattern.&quot;</span>),
    <span class="string">&quot;[Year]-[Month]-[Day], [Hour]:[Minute]&quot;</span>
);</code></pre></div>
<h2 id="combinators"><a href="#combinators">Combinators</a></h2>
<p>In the example above, the replacements will be parsed at compile time and stored on a <a href="https://doc.rust-lang.org/1.60.0/alloc/vec/struct.Vec.html" title="Vec"><code>Vec</code></a>,
which is a collection type that has an implementation for <a href="trait.ReplacementProvider.html" title="ReplacementProvider"><code>ReplacementProvider</code></a>
trait.</p>
<p>In real use, the consumer may want to use different models of replacement provider,
and different element schemas.
Because the replacement is an iterator itself, it allows for other, more specialized parsers,
to be used to lazily parse particular patterns that are meant to replace the placeholders.
This allows for lazy parsing of those specialized patterns to be triggered
only if the placeholder pattern encounters a placeholder key that requires given
pattern to be used.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InterpolatedPattern.html" title="icu_pattern::InterpolatedPattern struct">InterpolatedPattern</a></div><div class="item-right docblock-short"><p><code>InterpolatedPattern</code> stores the result of parsing operation as a vector
of <a href="enum.InterpolatedKind.html" title="InterpolatedKind"><code>InterpolatedKind</code></a> elements.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Interpolator.html" title="icu_pattern::Interpolator struct">Interpolator</a></div><div class="item-right docblock-short"><p>Placeholder pattern interpolator.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Parser.html" title="icu_pattern::Parser struct">Parser</a></div><div class="item-right docblock-short"><p>Placeholder pattern parser.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ParserOptions.html" title="icu_pattern::ParserOptions struct">ParserOptions</a></div><div class="item-right docblock-short"><p>Options passed to the constructor of <a href="struct.Parser.html" title="Parser"><code>Parser</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Pattern.html" title="icu_pattern::Pattern struct">Pattern</a></div><div class="item-right docblock-short"><p><code>Pattern</code> stores the result of parsing operation as a vector
of <a href="enum.PatternToken.html" title="PatternToken"><code>PatternToken</code></a> elements.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.InterpolatedKind.html" title="icu_pattern::InterpolatedKind enum">InterpolatedKind</a></div><div class="item-right docblock-short"><p>The type returned by the <a href="struct.Interpolator.html" title="Interpolator"><code>Interpolator</code></a> iterator.
This enum stores references to string literals parsed as
part of the pattern and elements returned by the <a href="trait.ReplacementProvider.html" title="ReplacementProvider"><code>ReplacementProvider</code></a>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.InterpolatorError.html" title="icu_pattern::InterpolatorError enum">InterpolatorError</a></div><div class="item-right docblock-short"><p>An error returned when interpolating a pattern.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ParserError.html" title="icu_pattern::ParserError enum">ParserError</a></div><div class="item-right docblock-short"><p>An error returned when parsing a pattern.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.PatternError.html" title="icu_pattern::PatternError enum">PatternError</a></div><div class="item-right docblock-short"><p>An error returned from a pattern.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.PatternToken.html" title="icu_pattern::PatternToken enum">PatternToken</a></div><div class="item-right docblock-short"><p>A token returned by the <a href="struct.Parser.html"><code>Parser</code></a>.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ReplacementProvider.html" title="icu_pattern::ReplacementProvider trait">ReplacementProvider</a></div><div class="item-right docblock-short"><p>A trait which has to be implemented on any type that will be used to
provide replacement values for the placeholder pattern during interpolation.</p>
</div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="icu_pattern" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.60.0 (7737e0b5c 2022-04-04)" ></div>
</body></html>